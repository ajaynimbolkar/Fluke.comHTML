function queueAnimation(t,e,n){var o=0,i=t;t=$($(t)[0]),n(t);var a=setInterval(function(){t=$($("body").find(i)[++o]),n(t),$(i).length==o&&clearInterval(a)},e)}function checkGameState(){$(".dropped").length===$(".game-block").length&&$("body").trigger("complete-game")}window.addEventListener("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)}),$(function(){setTimeout(function(){"#restart"==window.location.hash?$(".event").trigger("start-game"):$(".container.overlay").fadeIn()},500),$(".container.cards, .sequence").hide(),$(".container.howto-inner, .container.howto-overlay").hide(),$(".event").click(function(){$(this).trigger($(this).attr("data-event"))}),$(".event").on("start-game",function(){$(".container.overlay").fadeOut(function(){$(".container.howto-inner, .container.howto-overlay").fadeIn(),$(".container.cards").show(),queueAnimation("#blocks .sequence",100,function(t){$(t).show(100)}),setTimeout(function(){queueAnimation("#items .sequence",100,function(t){$(t).show(100)}),$(".container.howto-inner, .container.howto-overlay").fadeOut(250)},3e3)})}),$("body").on("complete-game",function(){$(".check-solution").show()}),$(".check-solution").click(function(){$(".check-solution").hide(),queueAnimation("#blocks .sequence .game-block",250,function(t){$(t).hasClass("invalid")?$(t).after('<div class="answer-wrong"></div>'):$(t).hasClass("valid")&&$(t).after('<div class="answer-right"></div>'),$(".answer-right").length==$(".game-block").length?($(".submit-results").fadeIn(),$(".try-again").hide()):$(".answer-wrong, .answer-right").length==$(".game-block").length&&($(".submit-results").hide(),$(".try-again").fadeIn())})}),$(".try-again button.btn").click(function(){window.location.hash="#restart",window.location.reload()}),$(".row.submit-results .btn").click(function(){$(this).fadeOut(100),$("#items .sequence, #blocks .sequence").fadeOut(100),setTimeout(function(){$(".container.form").fadeIn(function(){$(".container.form .span-4").height($(".container.form .span-8").height()-5)})},500)}),$("#taf").click(function(){$(this).is(":checked")?$(".container.form .span-4").show():$(".container.form .span-4").hide()})}),function(t){t.fn.randomize=function(e){return this.each(function(){var n=t(this),o=n.children(e);o.sort(function(){return Math.round(Math.random())-.5}),n.remove(e);for(var i=0;i<o.length;i++)n.append(o[i])})}}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(o)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,o=t.ui.mouse.prototype,i=o._mouseInit;o._touchStart=function(t){var o=this;!n&&o._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,o._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},o._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},o._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},o._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),i.call(e)}}}(jQuery),$(function(){$.getJSON("language.json",function(t){t=t[0],document.title=t.title,$(".container.header h2").html(t.title),$(".container.header h4").html(t.subtitle),$(".container.footer li.title-terms a").html(t["footer.terms"]).attr("href",t["footer.url.terms"]),$(".container.footer li.title-privacy a").html(t["footer.privacy"]).attr("href",t["footer.url.privacy"]),$(".container.footer li.title-disclaimer a").html(t["footer.disclaimer"]).attr("href",t["footer.url.disclaimer"]),$(".container.footer .title-copyright").html(t["footer.copyright"]),$(".container.overlay h2").html(t["intro.heading"]),$(".container.overlay h3").html(t["intro.sub_heading"]),$(".container.overlay button").html(t["intro.start_button"]),$(".container.howto-inner h3").html(t["game.how_to"]),$(".row.check-solution button").html(t["game.check_button"]),$(".row.try-again button").html(t["game.again_button"]),$(".row.submit-results button").html(t["game.submit_button"]),$(".container.form h3").html(t["form.heading"])}),$(document).bind("touchmove",!1),$.fx.interval=10,$.getJSON("settings.json",function(t){$(t).each(function(t){$($(".game-question-mark")[t]).css(this.questionmark),$($(".game-block-title")[t]).html(this.title),$($(".game-block-inner")[t]).css({background:'url("'+this.image+'")'}),$($(".game-item-inner")[t]).css({background:'url("'+this.thumb+'")'})}),$("#items").randomize(".span-2"),$("#blocks").randomize(".span-4")}),$(".game-item").draggable({revert:"invalid",revertDuration:100}),$(".game-block").droppable({accept:".game-item",drop:function(t,e){var n=$(e.draggable[0]),o=$(t.target);o.addClass("dropped"),o.animate({opacity:.6}),$(n).offset({top:o.offset().top+(o.height()-n.height())/2,left:o.offset().left+(o.width()-n.width())/2}),o.addClass(n.attr("data-item")!=o.attr("data-item")?"invalid":"valid"),o.droppable("destroy"),n.draggable("destroy"),checkGameState()}})});